<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Your Sales Competency Assessment Results</title>
</head>
<body>
<div id="results" style="font-family:Arial, sans-serif; max-width:700px; margin:auto; padding:20px; line-height:1.5;">
  <h2>Your Sales Competency Assessment Results</h2>
  <p>We've assessed your sales skills based on your responses in the scenarios you completed. Your results appear below.</p>
  <div id="competencyScores"></div>

  <h3>Your Personalized Recommendations:</h3>
  <div id="recommendations"></div>

  <button onclick="restartAssessment()">Restart Assessment</button>
</div>

<script>
// Retrieve scenario scores from session storage
let scenario1Scores = JSON.parse(sessionStorage.getItem('scenario1Scores') || '{}');
let scenario2Scores = JSON.parse(sessionStorage.getItem('scenario2Scores') || '{}');

// Define competencies explicitly
let competencies = {Discovery:0,Competitive:0,Demoing:0,Tools:0,Business:0,Engagement:0};

// Safely add scores from each scenario, ensuring values exist
for(let skill in competencies){
  competencies[skill] = (scenario1Scores[skill] || 0) + (scenario2Scores[skill] || 0);
}

// Function to clearly determine competency Level
function skillLevel(score){
  if(score>=5) return 'Advanced';
  else if(score>=3) return 'Intermediate';
  else return 'Beginner';
}

// Display scores clearly with skill levels
let scoresHTML = '<ul>';
for(let skill in competencies){
  scoresHTML += `<li><strong>${skill}:</strong> ${competencies[skill]} (${skillLevel(competencies[skill])})</li>`;
}
scoresHTML += '</ul>';
document.getElementById('competencyScores').innerHTML = scoresHTML;

// Determine top strength and improvement areas clearly
let highestSkill = Object.keys(competencies).reduce((a,b)=>competencies[a]>competencies[b]?a:b);
let lowestSkill = Object.keys(competencies).reduce((a,b)=>competencies[a]<competencies[b]?a:b);

// Provide carefully crafted, explicit practical recommendations
let advice = {
  Discovery: "Further polish your client discovery skills through advanced questioning and active listening workshops.",
  Competitive: "Reinforce your competitive analysis knowledge by engaging explicitly in structured competitive positioning training.",
  Demoing: "Continue honing product demonstration skills, emphasizing clear customer value and interaction.",
  Tools: "Strengthen proficiency in credibility-building analytics by clearly exploring specialized training in sales tools.",
  Business: "Deepen your business acumen explicitly, emphasizing aligning your solutions directly with client business goals.",
  Engagement: "Enhance your client communication strategy explicitly, focusing on professionalism and clearly defined rules of engagement."
};

// Display recommendations explicitly and neatly
let recommendationHTML = `
  <p><strong>Your primary strength:</strong> ${highestSkill}. ${advice[highestSkill]}</p>
  <p><strong>Top area for improvement:</strong> ${lowestSkill}. ${advice[lowestSkill]}</p>
`;
document.getElementById('recommendations').innerHTML = recommendationHTML;

// Button explicitly resets all stored data and returns user to start (index.html)
function restartAssessment(){
  sessionStorage.clear();
  location.href='index.html';
}
</script>

</body>
</html>
